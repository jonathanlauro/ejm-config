# ejm-config

Biblioteca para configura√ß√£o simplificada de servi√ßos remotos via **EJM (Enterprise Java Messaging)** utilizando **RMI** no **Spring Boot**.  
O objetivo da `ejm-config` √© permitir que aplica√ß√µes exponham e consumam servi√ßos remotos de forma segura, desacoplada e padronizada, semelhante ao funcionamento do **EJB Remote**.

---

## üöÄ Instala√ß√£o

Adicione a depend√™ncia da `ejm-config` ao seu projeto (exemplo com **Maven**):

```xml
<dependency>
  <groupId>br.com.ejm</groupId>
  <artifactId>ejm-config</artifactId>
  <version>0.0.1</version>
</dependency>
```
Ou com Gradle:
```
implementation 'br.com.ejm:ejm-config:1.0.0'
```
## üß© Estrutura recomendada
√â boa pr√°tica criar uma biblioteca delegate separada que contenha:
DTOs e Models;
Interfaces de servi√ßo que estendem java.rmi.Remote.
Por exemplo:
```
br.com.usuario.delegate
 ‚îú‚îÄ‚îÄ dto/
 ‚îú‚îÄ‚îÄ model/
 ‚îî‚îÄ‚îÄ service/
      ‚îî‚îÄ‚îÄ UsuarioService.java
      
```
Essa biblioteca poder√° ser usada tanto no servidor (provider) quanto no cliente (consumer).

## üñ•Ô∏è Servidor (Provider)
No projeto que disponibiliza o servi√ßo remoto:

Implemente a interface do delegate:
```
@EjmService(name = "UsuarioService")
public class UsuarioServiceImpl implements UsuarioService {
    // implementa√ß√£o dos m√©todos
}
```
Habilite o servidor EJM na classe principal:
```
@SpringBootApplication
@EnableEjmServe
public class UsuarioApplication {
    public static void main(String[] args) {
        SpringApplication.run(UsuarioApplication.class, args);
    }
}
```
Garanta que o servidor tenha conectividade de rede acess√≠vel para clientes RMI.

## üíª Cliente (Consumer)
No projeto que consome o servi√ßo remoto:

Habilite o cliente EJM na classe principal:
```
@SpringBootApplication
@EnableEjmClient
public class PedidoApplication {
    public static void main(String[] args) {
        SpringApplication.run(PedidoApplication.class, args);
    }
}
```
Configure o arquivo config-ejm.xml em:

src/main/resources/config-ejm.xml

Exemplo:
```
<ejm>
    <rmi>
        <host>192.168.2.15</host>
        <port>1099</port>
        <base-package>br.com.usersdelegate.remote</base-package>
    </rmi>
</ejm>
```

Injete o servi√ßo remoto normalmente com Spring:
```
@Service
public class PedidoService {

    @Autowired
    private UsuarioService usuarioService;

    public void processar() {
        var usuario = usuarioService.buscarPorId(1L);
        System.out.println(usuario.getNome());
    }
}
```
## ‚öôÔ∏è Como funciona internamente
A anota√ß√£o @EnableEjmServe configura automaticamente o registro RMI e exp√µe os beans anotados com @EjmService.

A anota√ß√£o @EnableEjmClient l√™ o arquivo config-ejm.xml e registra dinamicamente os proxies remotos no contexto Spring.
O @Autowired funciona normalmente tanto para beans locais quanto remotos.

## üß† Boas pr√°ticas
Sempre use uma lib delegate compartilhada entre cliente e servidor.
Mantenha o nome da interface no @EjmService(name = ...) id√™ntico ao informado no config-ejm.xml.
Evite depend√™ncias bidirecionais entre os projetos.

## üìÑ Licen√ßa
Este projeto est√° licenciado sob a Licen√ßa MIT. Veja o arquivo LICENSE para mais detalhes.